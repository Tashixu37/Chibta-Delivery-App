<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Profile</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />
    <link rel="stylesheet" href="/styles/main.css" />
    <link rel="stylesheet" href="/styles/profile.css" />
  </head>

  <body class="d-flex flex-column min-vh-100">
    <!-- Header -->
    <header
      class="profile-header text-center py-3 bg-white border-bottom shadow-sm"
    >
      <h5 class="mb-0 text-dark">Account</h5>
    </header>

    <div class="mt-4">
            <a href="/" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left me-2"></i> Continue Shopping
            </a>
        </div>
    <!-- Main Content -->
    <main class="flex-grow-1 profile-main pt-4 pb-5 container">
      <div class="d-flex flex-column align-items-center mb-4">
        <div class="profile-picture-wrapper position-relative mb-3">
          <% if (user && user.profile_pic) { console.log("inside if");
          console.log("User Profile Picture:",user.profile_pic);%>
          <img
            src="/profiles/<%=user.profile_pic%>"
            alt="Profile Picture"
            class="profile-picture img-fluid rounded-circle"
          />
          <% } else { console.log("User Profile Picture:",user.profile_pic);
          console.log("inside else"); %>
          <img
            src="/profiles/defaultProfile.jpg"
            alt="Profile Picture"
            class="profile-picture img-fluid rounded-circle"
          />
          <% } %>

          <!-- Camera icon outside the circle -->
          <a
            href="#"
            class="profile-camera-icon d-flex justify-content-center align-items-center"
            onclick="document.getElementById('profilePicInput').click(); return false;"
          >
            <i class="fas fa-camera"></i>
          </a>

          <form
            id="uploadForm"
            action="/upload-profile"
            method="POST"
            enctype="multipart/form-data"
            style="display: none"
          >
            <input
              type="file"
              id="profilePicInput"
              name="profilePic"
              accept="image/*"
              onchange="document.getElementById('uploadForm').submit();"
            />
          </form>
        </div>

        <% if (user) { %>
        <h5 class="profile-name text-dark mb-1"><%= user.username %></h5>
        <p class="profile-email text-muted mb-0"><%= user.email %></p>
        <% } %>
      </div>

      <div
        class="profile-menu list-group list-group-flush bg-white rounded-3 shadow-sm"
      >
        <a
          href="#"
          class="list-group-item list-group-item-action d-flex align-items-center"
        >
          <i class="far fa-user profile-icon me-3"></i>
          <span>About me</span>
          <i class="fas fa-chevron-right ms-auto text-muted"></i>
        </a>
        <a
          href="#"
          class="list-group-item list-group-item-action d-flex align-items-center"
        >
          <i class="fas fa-box profile-icon me-3"></i>
          <span>My Orders</span>
          <i class="fas fa-chevron-right ms-auto text-muted"></i>
        </a>
        <a
          href="#"
          class="list-group-item list-group-item-action d-flex align-items-center"
        >
          <i class="far fa-heart profile-icon me-3"></i>
          <span>My Favorites</span>
          <i class="fas fa-chevron-right ms-auto text-muted"></i>
        </a>
        <a
          href="#"
          class="list-group-item list-group-item-action d-flex align-items-center"
        >
          <i class="fas fa-map-marker-alt profile-icon me-3"></i>
          <span>My Address</span>
          <i class="fas fa-chevron-right ms-auto text-muted"></i>
        </a>
        <a
          href="#"
          class="list-group-item list-group-item-action d-flex align-items-center"
        >
          <i class="far fa-credit-card profile-icon me-3"></i>
          <span>Payment Information</span>
          <i class="fas fa-chevron-right ms-auto text-muted"></i>
        </a>
        <a
          href="#"
          class="list-group-item list-group-item-action d-flex align-items-center"
        >
          <i class="fas fa-receipt profile-icon me-3"></i>
          <span>Transactions</span>
          <i class="fas fa-chevron-right ms-auto text-muted"></i>
        </a>
        <a
          href="#"
          class="list-group-item list-group-item-action d-flex align-items-center"
        >
          <i class="far fa-bell profile-icon me-3"></i>
          <span>Notifications</span>
          <i class="fas fa-chevron-right ms-auto text-muted"></i>
        </a>
        <a
          href="/logout"
          class="list-group-item list-group-item-action d-flex align-items-center text-decoration-none"
        >
          <i class="fas fa-sign-out-alt profile-icon me-3 text-success"></i>
          <span class="text-success">Sign out</span>
          <i class="fas fa-chevron-right ms-auto text-muted"></i>
        </a>
      </div>
    </main>

    <!-- Bottom Navigation -->
    <nav
      class="bottom-nav-bar fixed-bottom bg-white d-flex justify-content-around align-items-center py-2 shadow-lg"
    >
      <a
        href="/"
        class="nav-item d-flex flex-column align-items-center text-decoration-none text-muted"
      >
        <i class="fas fa-home fa-lg mb-1"></i>
        <small>Home</small>
      </a>
      <a
        href="/profile"
        class="nav-item d-flex flex-column align-items-center text-decoration-none text-success"
      >
        <i class="fas fa-user fa-lg mb-1"></i>
        <small>Profile</small>
      </a>
      <a
        href="/favorites"
        class="nav-item d-flex flex-column align-items-center text-decoration-none text-muted"
      >
        <i class="far fa-heart fa-lg mb-1"></i>
        <small>Favorites</small>
      </a>
      <a
        href="/cart"
        class="nav-item cart-icon position-relative d-flex justify-content-center align-items-center rounded-circle"
      >
        <i class="fas fa-shopping-bag fa-lg text-white"></i>
      </a>
    </nav>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
