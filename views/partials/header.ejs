<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title><%= typeof title !== 'undefined' ? title : 'Chibta App' %></title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles/main.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
  </head>
  <body class="bg-light">
    <nav
      class="navbar navbar-expand-lg"
      style="
        background: var(--background-alt);
        border-bottom: 1px solid var(--border);
      "
    >
      <div class="container-fluid">
        <a class="navbar-brand fw-bold" href="/">
  <img src="/images/logo.png" alt="ChhibTa" style="height: 60px;">
</a>

        <div class="d-flex align-items-center ms-3">
          <span class="me-2" style="color: var(--text); font-weight: 500"
            >Delivery within 30 minutes</span
          >
          <select class="form-select form-select-sm" style="width: 160px">
            <option selected>Select location</option>
            <option value="1">Downtown</option>
            <option value="2">Uptown</option>
            <option value="3">Suburbs</option>
          </select>
        </div>
        <form class="d-flex mx-auto" style="max-width: 400px; flex: 1 1 400px">
          <input
            class="form-control me-2"
            type="search"
            placeholder="Search groceries..."
            aria-label="Search"
            autocomplete="off"
            id="searchInput"
          />
          <button
            class="btn btn-outline-success"
            type="submit"
            style="
              color: var(--primary-dark);
              border-color: var(--primary-dark);
            "
          >
            Search
          </button>
          <ul
            class="list-group position-absolute w-100"
            id="searchSuggestions"
            style="z-index: 1000; display: none"
          ></ul>
        </form>
        <div class="d-flex align-items-center ms-auto">
          <% if (typeof user !== 'undefined' && user) { %>
          <span class="me-3 d-flex align-items-center">
            <a
              href="/profile"
              style="
                text-decoration: none;
                color: var(--primary-dark);
                display: flex;
                align-items: center;
              "
            >
              <img
                src="<%= user.profile_pic ? user.profile_pic : './profiles/defaultProfile.jpg' %>"
                alt="Profile"
                style="
                  width: 35px;
                  height: 35px;
                  border-radius: 50%;
                  object-fit: cover;
                  margin-right: 8px;
                "
              />
              <!-- <%= user.name %> -->
            </a>
          </span>
          <a href="/logout" class="btn btn-primary me-2">Logout</a>
          <% } else { %>
          <a href="/login" class="btn btn-primary me-2">Login</a>
          <% } %>

          <a href="/cart" class="btn btn-outline-primary position-relative">
            <i class="bi bi-cart"></i> My Cart
            <span
              class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
            >
              <%= typeof cartCount !== 'undefined' ? cartCount : 0 %>
              <span class="visually-hidden">cart items</span>
            </span>
          </a>
        </div>
      </div>
    </nav>
    <div
      class="container mt-5 p-4 rounded shadow"
      style="background: var(--background)"
    ></div>
  </body>
</html>
